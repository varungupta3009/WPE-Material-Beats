window.i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};var c=Array(32);window.wallpaperRegisterAudioListener&&window.wallpaperRegisterAudioListener(function(a){for(var b=0;32>b;b++)c[b]=Math.floor(100*a[4*b])});var e=document.getElementById("canvas"),f=e.getContext("2d");e.width=window.innerWidth;e.height=window.innerHeight;var g=0,h=0,k=15,l=!0,m=!0,n=1,p=.5,q=[];
function r(){q=[];g=Math.floor(Math.floor(e.width*e.height/5E3)*n/4);for(var a=0;a<g;a++)q.push(new t)}window.wallpaperPropertyListener={applyUserProperties:function(a){a.pointDensity&&(n=a.pointDensity.value,r());if(a.bgcolor){var b=a.bgcolor.value.split(" ").map(function(d){return Math.ceil(255*d)});e.style.backgroundColor="rgb("+b+")"}a.image&&(a.image.value?(e.style.backgroundImage="url(file:///"+a.image.value+")",e.style.backgroundSize="100% 100%"):e.style.backgroundImage="none");a.ratio&&(k=a.ratio.value/1.5);a.tEqualize&&(p=1-a.tEqualize.value/10);a.showpoint&&(l=a.showpoint.value);a.smovefollow&&(m=a.smovefollow.value)}};
function t(){this.type=.5>Math.random();this.rotation=.5>Math.random();this.index=h++;this.x=Math.random()*e.width;this.y=Math.random()*e.height;this.a=-.5+Math.random();this.b=-.5+Math.random();this.l=2.5*(.01*Math.floor(90*Math.random())+.1)+.5;this.c=0;this.color=["#4285F4","#EA4335","#FBBC05","#34A853"][this.index%4];this.f=this.type?2*Math.PI:Math.round(100*Math.random())/200*Math.PI;this.g=this.type?0:(Math.round(100*Math.random())/200+1)*Math.PI;h%=32}
function v(a){var b=m?Math.min(Math.max(.12*c.slice(1,6).reduce(function(w,x){return w+x},0),.5),5):1.5,d=a.c+(a.type?0:5);a.x+=a.a*b;a.y+=a.b*b;a.x>=e.width-d?(a.x=e.width-d,a.a=-a.a):a.x<=d&&(a.x=d,a.a=-a.a);a.y>=e.height-d?(a.y=e.height-d,a.b=-a.b):a.y<=d&&(a.y=d,a.b=-a.b);a.type||(a.f+=(a.rotation?.01:-.01)*b,a.g+=(a.rotation?.01:-.01)*b);b=c[a.index]/20;if(!b||1>b)b=1;b=Math.min(a.l*b,4)*k;a.c&&1!==p&&(b=b*p+a.c*(1-p));f.lineWidth=10;f.beginPath();a.type?f.fillStyle=a.color:f.strokeStyle=a.color;
f.arc(a.x,a.y,b,a.f,a.g,!1);a.type?f.fill():f.stroke();1!==p&&(a.c=b)}window.onload=function(){f.clearRect(0,0,e.width,e.height);for(var a=0;a<g;a++)l&&v(q[a]);window.i(window.onload)};window.onresize=function(){e.width=window.innerWidth;e.height=window.innerHeight;g=Math.floor(e.width*e.height/5E3);r()};window.onresize();